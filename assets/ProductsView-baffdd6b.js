import{L as k}from"./index-65a896c4.js";import{_ as y,r as h,o,c as n,b as _,a as t,F as p,e as E,n as V,t as r,f as g,w as $,d as m}from"./index-43f277a7.js";const{VITE_USER:l,VITE_PATH:c}={VITE_USER:"youting",VITE_PATH:"https://vue3-course-api.hexschool.io",BASE_URL:"/vue-week6/",MODE:"production",DEV:!1,PROD:!0},C={data(){return{isActive:!1,isLoading:!1,products:[]}},components:{Loading:k},methods:{getProducts(){this.isLoading=!0,this.$http.get(`${c}/v2/api/${l}/products`).then(s=>{this.products=s.data.products,this.isLoading=!1})},getCart(){this.$http.get(`${c}/v2/api/${l}/cart`).then(s=>{this.carts=s.data.data}).catch(s=>{alert(s.data.message)})},addToCart(s,a=1){this.isActive=!0;const d={product_id:s,qty:a};this.$http.post(`${c}/v2/api/${l}/cart`,{data:d}).then(()=>{this.getCart(),this.isActive=!1,alert("已加入購物車")}).catch(u=>{alert(u.data.message)})}},mounted(){this.getProducts()}},L=t("h1",null,"這是產品列表",-1),T={class:"table align-middle"},x=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),A={style:{width:"200px"}},P={key:0,class:"h5"},w={class:"h6"},I={class:"h5"},S={class:"btn-group btn-group-sm"},U=["disabled","onClick"],B={key:0,class:"spinner-border spinner-border-sm"};function D(s,a,d,u,i,v){const b=h("loading"),f=h("router-link");return o(),n(p,null,[_(b,{active:i.isLoading,"onUpdate:active":a[0]||(a[0]=e=>i.isLoading=e)},null,8,["active"]),L,t("table",T,[x,t("tbody",null,[(o(!0),n(p,null,E(i.products,e=>(o(),n("tr",{key:e.id},[t("td",A,[t("div",{style:V([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${e.imageUrl})`}])},null,4)]),t("td",null,r(e.title),1),t("td",null,[e.price===e.origin_price?(o(),n("div",P,r(e.price)+" 元 ",1)):g("",!0),t("div",null,[t("del",w,"原價 "+r(e.origin_price)+" 元",1),t("div",I,"現在只要 "+r(e.price)+" 元",1)])]),t("td",null,[t("div",S,[_(f,{class:"btn btn-outline-secondary",to:`/product/${e.id}`},{default:$(()=>[m("產品細節")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",disabled:i.isActive,onClick:N=>v.addToCart(e.id)},[i.isActive?(o(),n("i",B)):g("",!0),m(" 加到購物車 ")],8,U)])])]))),128))])])],64)}const F=y(C,[["render",D]]);export{F as default};
